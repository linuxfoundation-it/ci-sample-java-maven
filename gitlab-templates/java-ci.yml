---
variables:
  MAVEN_IMAGE_TAG: 3-jdk-8

cache:
  paths:
    - .m2/repository/

build:
  stage: build
  image: maven:$MAVEN_IMAGE_TAG
  script: mvn $MAVEN_CLI_OPTS clean verify

publish:
  stage: publish
  image: maven:$MAVEN_IMAGE_TAG
  script: mvn $MAVEN_CLI_OPTS deploy
  only:
    - master
